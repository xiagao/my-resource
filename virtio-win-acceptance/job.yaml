- job-template:
    description: |
        Managed by Jenkins Job Builder. Do not edit via web.
    name: 'virt-kvm-virtio-win-trigger'
    project-type: pipeline
    concurrent: true
    parameters:
        - string:
            name: 'NVR'
            default: ''
            description: "Name-version-release of the brew build (e.g. {{component}}-{{version}}-{{release}},if trigger virtio-win-prewhql test, can use like virtio-win-prewhql-0.1-142 ;else if trigger virtio-win test, use like virtio-win-1.9.3-1.el7 )"
        - string:
            name: 'BREW_TAG'
            default: ''
            description: "Tag name of the brew build (e.g.rhel-8.1.0-candidate )"
        - string:
            name: 'TARGET_RELEASE'
            default: ''
            description: "Target release of the brew build,such as RHEL-8.1.0"
        - string:
            name: 'MESSAGE_HEADERS'
            default: ''
            description: "Used to inject the message's header in case the UMB trigger is enabled"
        - string:
            name: 'CI_MESSAGE'
            default: ''
            description: "Used to inject the message's body in case the UMB trigger is enabled"
    triggers:
        - ci-trigger:
            provider-name: "Red Hat UMB"
            # str(uuid.uuid3(uuid.NAMESPACE_DNS, 'virt-kvm-brew-build-trigger-virtio-win-and-virtio-win-prewhql'))
            override-topic: "Consumer.rh-jenkins-ci-plugin.1ac21b0c-4e56-3473-b814-a65183cf865b.VirtualTopic.eng.brew.build.tag"
            jms-selector: "type = 'Tag' AND ((tag like '%gate' AND name is 'virtio-win') OR (tag like '%candidate' AND name is 'virtio-win-prewhql'))"
    dsl:
        !include-raw-escape: jobs/virtio-win-acceptance/scripts/trigger.groovy


- job-template:
    description: |
        Managed by Jenkins Job Builder. Do not edit via web.
    name: 'virt-kvm-{package_name}-{target_stream}-{task}'
    project-type: pipeline
    concurrent: true
    parameters:
        - string:
            name: 'NVR'
            default: ''
            description: "Name-version-releaseof the brew build (e.g. {{component}}-{{version}}-{{release}},if trigger virtio-win-prewhql test, can use like virtio-win-prewhql-0.1-142 ;else if trigger virtio-win test, use like virtio-win-1.9.3-1.el7 )"
        - string:
            name: 'TARGET_RELEASE'
            default: ''
            description: "Target release of the brew build,such as RHEL-8.1.0"
    dsl:
        !include-raw-escape: jobs/virtio-win-acceptance/scripts/runtest.groovy
