- job-template:
    description: |
        Managed by Jenkins Job Builder. Do not edit via web.It's just to distribute download jobs
    name: 'pipeline-whql-{osversion}-trigge'
    project-type: pipeline
    concurrent: true
    parameters:
        - string:
            name: 'VIRTIO_WIN_PREWHQL_VERSION'
            default: ''
            description: "virtio-win-prewhql version to test, e.g. 150"
        - string:
            name: 'DRIVER_NAME'
            default: ''
            description: "specified driver need to be tested ,Valid Value : \nSRL(aka serial) BLN(aka balloon) BLK (aka block) SCS (aka scsi) \nNIC (aka netkvm) RNG (aka virtio-rng) PNC (aks pvpanic) INP(aka virtio-input) QSR(qemupciserial)"
        - string:
            name: 'OTHER_PARAMS'
            default: '-M pc'
            description: "other info if needed,default is -M pc. The other value like: \n-l ..., --dataplane             parse whether use dataplane config ,only work when specify driver name as BLK ,others will be ignored. \n-m ..., --multiqueue            parse whether use multiqueue config ,only work when specify driver name as 'NIC' or 'SCS' ,other options will be ignored.  \n-t ..., --virio1_0     parse wheter use virtio 1.0 device. \n-M ..., --machine_type=...      parse machine type,valid value:pc,q35"
        - hidden:
            name: OSVERSION
            default: '{osversion}'
            description: 'Major version of the OS'
    dsl:
        !include-raw-escape: jobs/virtio-win-whql/scripts/trigger.groovy


- job-template:
    description: |
        Managed by Jenkins Job Builder. Do not edit via web.
    name: 'pipeline-whql-{osversion}-{windows_group}-runtest'
    project-type: pipeline
    concurrent: true
    parameters:
        - string:
            name: 'VIRTIO_WIN_PREWHQL_VERSION'
            default: ''
            description: "virtio-win-prewhql version to test, e.g. 150"
        - string:
            name: 'DRIVER_NAME'
            default: ''
            description: "specified driver need to be tested ,Valid Value : \nSRL(aka serial) BLN(aka balloon) BLK (aka block) SCS (aka scsi) \nNIC (aka netkvm) RNG (aka virtio-rng) PNC (aks pvpanic) INP(aka virtio-input) QSR(qemupciserial)"
        - string:
            name: 'OTHER_PARAMS'
            default: '-M pc'
            description: "other info if needed,default is -M pc. The other value like: \n-l ..., --dataplane             parse whether use dataplane config ,only work when specify driver name as BLK ,others will be ignored. \n-m ..., --multiqueue            parse whether use multiqueue config ,only work when specify driver name as 'NIC' or 'SCS' ,other options will be ignored.  \n-t ..., --virio1_0     parse wheter use virtio 1.0 device. \n-M ..., --machine_type=...      parse machine type,valid value:pc,q35"
        - string:
            name: 'QEMU_BREW_NVR'
            default: ''
            description: "QEMU NVR of the brew build  )"
        - string:
            name: 'QEMU_BREW_TAG'
            default: ''
            description: "QEMU TAG of the brew build )"
        - hidden:
            name: OSVERSION
            default: '{osversion}'
            description: 'Major version of the OS,such as el7'
        - hidden:
            name: WINDOWS_GROUP
            default: '{windows_group}'
            description: 'Tested windows group for downstream QEMU'
    dsl:
        !include-raw-escape: jobs/virtio-win-whql/scripts/runtest.groovy
