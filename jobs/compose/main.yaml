- project:
    name: 'compose-qemu'
    jobs:
        - 'trigger'
        - 'update-iso'
        - 'runtest-x86_64'
        - 'runtest-ppc64le'

- job-group:
    name: 'trigger'
    jobs:
        - 'virt-kvm-pipeline-{osversion}-compose-testing-trigger'
        - 'virt-kvm-pipeline-urltrigger-workaround-{osversion}'
    osversion:
        - 'el7':
            hardwares: 'x86_64-intel x86_64-amd ppc64le-power8'
            major: '7'
        - 'el-alt-7':
            hardwares: 'ppc64le-power9'
            major: 'ALT-7'
        - 'el6':
            hardwares: 'x86_64-intel x86_64-amd'
            major: '6'


- job-group:
    name: 'update-iso'
    jobs:
        - 'virt-kvm-pipeline-{osversion}-update-iso-images-{lab}'
    lab:
        - 'pek2'
    osversion:
        - 'el6'
        - 'el7'


- job-group:
    name: 'runtest-x86_64'
    script_path: 'jobs/compose/scripts/runtest-x86.groovy'
    jobs:
        - 'virt-kvm-pipeline-{osversion}-{hardware}-{test_type}-runtest'
    test_type:
        - 'installation'
        - 'functional'
    hardware:
        - 'x86_64-intel'
        - 'x86_64-amd'
    osversion:
        - 'el7'
        - 'el6'


- job-group:
    name: 'runtest-ppc64le'
    script_path: 'jobs/compose/scripts/runtest-ppc64le.groovy'
    jobs:
        - 'virt-kvm-pipeline-{osversion}-{hardware}-{test_type}-runtest'
    test_type:
        - 'installation'
        - 'functional'
    hardware:
        - 'ppc64le-power8'
        - 'ppc64le-power9'
    osversion:
        - 'el7'
        - 'el-alt-7'
    exclude:
        - hardware: 'ppc64le-power8'
          osversion: 'el-alt-7'
        - hardware: 'ppc64le-power9'
          osversion: 'el7'
